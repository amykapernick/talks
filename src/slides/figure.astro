---
import { Image } from '@astrojs/image/components';

const { image, caption, ...args } = Astro.props
---

<style>
	figure {
		height: 100%;
		margin: 0;
		display: grid;
		width: 100%;
		max-width: 90vw;
		grid-template-rows: 1fr max-content;
		justify-self: stretch;
		align-self: stretch;
		overflow: hidden;
	}

	div {
		max-height: 100%;
		overflow: hidden;
	}

	img {
		display: block;
		width: 100%;
		height: 100%;
		object-fit: contain;
	}

	figcaption {
		font-size: 0.8em;
		padding: 0.4em 0;
	}
</style>

<section {...args}>
	<figure>
		<div>
			<Image {...image} loading={'eager'} />
		</div>
		{caption && <figcaption>{caption}</figcaption>}
	</figure>
	<slot />
</section>